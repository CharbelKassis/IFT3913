package paint.gui.draw;

import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.InputEvent;
import java.awt.event.MouseEvent;

public class DrawLine implements Drawable {

	private Graphics2D graphics;
	private MouseEvent mouseEvent;
	private boolean isFirstClick;
	private Point firstPosition;
	private Point secondPosition;

	public DrawLine(Graphics2D graphics, MouseEvent mouseEvent) {
		
		this.graphics = graphics;
		this.mouseEvent = mouseEvent;
		this.graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
		this.isFirstClick = true;
               
	}
	
	@Override
	public void draw() {
		
		if(this.isFirstClick) {
			
			int firstPositionX = this.mouseEvent.getX();
			int firstPositionY = this.mouseEvent.getY();
			this.firstPosition = new Point(firstPositionX,firstPositionY);
			this.isFirstClick = false;

		}
		
		else {

			int secondPositionX = this.mouseEvent.getX();
			int secondPositionY = this.mouseEvent.getY();
			this.secondPosition = new Point(secondPositionX,secondPositionY);
			
		graphics.drawLine(
				
				(int)this.firstPosition.getX(),
				(int)this.firstPosition.getY(),
				(int)this.secondPosition.getX(), 
				(int)this.secondPosition.getY()
				 
		);
		
		graphics.dispose();
		
		System.out.println(this.firstPosition);
		System.out.println(this.secondPosition);
		
		this.isFirstClick = true;
		
		}

		
	}

	@Override
	public void changeEvent(InputEvent event) {
		
		this.mouseEvent = (MouseEvent) event;
		
	}
		
}
